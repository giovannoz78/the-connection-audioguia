<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Connection — Audio Guía</title>
<link rel="stylesheet" href="style.css">
<style>
:root{ --bg:#0b0b0e; --fg:#f1f1f1; --muted:#9aa0a6; --accent:#d4af37 }
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
  /* Foto + overlay oscuro para legibilidad */
  background:
    linear-gradient(rgba(11,11,14,0.8), rgba(11,11,14,0.8)),
    url("fondo.png") no-repeat center center fixed;
  background-size:cover;
  color:var(--fg);
  display:grid;
  place-items:center;
  min-height:100vh;
  padding:32px;
}
.container{max-width:920px; width:100%; text-align:center}
h1{font-weight:700; letter-spacing:.01em; margin:8px 0 8px; font-size:clamp(40px,5vw,64px)}
p{color:var(--muted); margin:.25rem 0 1.75rem; font-size:clamp(16px,2vw,22px)}
.langs{display:flex; gap:1rem; justify-content:center; flex-wrap:wrap; margin:1.25rem 0 1.75rem}
button.lang{display:inline-flex; align-items:center; gap:.6rem; border:1px solid #2a2a2e; background:#121217; color:var(--fg); padding:.9rem 1.25rem; border-radius:9999px; cursor:pointer; font-weight:700; letter-spacing:.02em; box-shadow:inset 0 0 0 1px #000, 0 0 0 1px rgba(255,255,255,.04); transition:background .2s ease, box-shadow .2s ease, border-color .2s ease}
button.lang .flag{display:inline-flex; width:22px; height:16px; border-radius:2px; overflow:hidden}
button.lang:hover{background:#17181d}
button.lang.active{border-color:var(--accent); box-shadow:inset 0 0 0 2px #000, 0 0 0 2px rgba(212,175,55,.9)}
audio{width:100%; outline:none; margin:.5rem 0 0; border-radius:32px}
footer{margin-top:1.25rem; font-size:.95rem; color:var(--muted)}
a{color:var(--fg)}
.badge{display:inline-block; font-size:.9rem; padding:.35rem .6rem; border:1px solid #333; border-radius:10px; margin-left:.5rem; color:var(--muted); background:#111214}

/* Respeta usuarios con “reduce motion” */
@media (prefers-reduced-motion: reduce){
  *{transition:none!important}
}
</style>
</head>
<body>
  <main class="container">
    <h1>Audio Guía</h1>
    <p>Elige un idioma para reproducir el audio.</p>

    <div class="langs" role="tablist" aria-label="Seleccionar idioma">
      <button class="lang active" role="tab" data-lang="es" aria-selected="true">
        <span class="flag" aria-hidden="true">
          <svg viewBox="0 0 3 2" xmlns="http://www.w3.org/2000/svg"><rect width="3" height="2" fill="#AA151B"/><rect x="0" y="0.4" width="3" height="1.2" fill="#F1BF00"/></svg>
        </span>
        Español
      </button>
      <button class="lang" role="tab" data-lang="in" aria-selected="false">
        <span class="flag" aria-hidden="true">
          <svg viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg"><clipPath id="s"><path d="M0,0 v30 h60 v-30 z"/></clipPath><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><g clip-path="url(#s)"><path d="M0,0 v30 h60 v-30 z" fill="#012169"/><path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/><path d="M0,0 L60,30 M60,0 L0,30" stroke="#C8102E" stroke-width="4" clip-path="url(#t)"/><path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/><path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"/></g></svg>
        </span>
        English
      </button>
      <button class="lang" role="tab" data-lang="it" aria-selected="false">
        <span class="flag" aria-hidden="true">
          <svg viewBox="0 0 3 2" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="2" fill="#009246"/><rect x="1" width="1" height="2" fill="#fff"/><rect x="2" width="1" height="2" fill="#ce2b37"/></svg>
        </span>
        Italiano
      </button>
      <button class="lang" role="tab" data-lang="pt" aria-selected="false">
        <span class="flag" aria-hidden="true">
          <svg viewBox="0 0 3 2" xmlns="http://www.w3.org/2000/svg"><rect width="3" height="2" fill="#006600"/><rect x="1.2" width="1.8" height="2" fill="#FF0000"/><polygon points="1.2,1 1.5,0.5 1.8,1 1.5,1.5" fill="#FFDF00"/></svg>
        </span>
        Português
      </button>
    </div>

    <audio id="player" controls preload="none">
      <source id="src-mp3" src="AUDIOS/es.mp3" type="audio/mpeg">
      Tu navegador no soporta audio. <a id="download" href="AUDIOS/es.mp3" download>Descargar</a>
    </audio>
    <footer>
      <span id="meta" class="badge">ES · 128kbps · MP3</span>
    </footer>
  </main>

<script>
const AUDIO_URLS = {
  es: { url: "AUDIOS/es.mp3", label: "ES · 128kbps · MP3" },
  en: { url: "AUDIOS/in.mp3", label: "EN · 128kbps · MP3" },
  it: { url: "AUDIOS/it.mp3", label: "IT · 128kbps · MP3" },
  pt: { url: "AUDIOS/pt.mp3", label: "PT · 128kbps · MP3" }
};

const qs = new URLSearchParams(location.search);
const preferred = (qs.get("lang") || navigator.language || "es").slice(0,2);
const startLang = Object.keys(AUDIO_URLS).includes(preferred) ? preferred : "es";
const player = document.getElementById("player");
const source = document.getElementById("src-mp3");
const download = document.getElementById("download");
const meta = document.getElementById("meta");

function setLang(lang){
  document.querySelectorAll("button.lang").forEach(b=>{
    const active = b.dataset.lang===lang;
    b.classList.toggle("active", active);
    b.setAttribute("aria-selected", active ? "true":"false");
  });
  const data = AUDIO_URLS[lang];
  if(!data) return;
  source.src = data.url;
  if(download) download.href = data.url;
  if(meta) meta.textContent = data.label;
  player.pause();
  player.load();
  player.play().catch(()=>{ /* autoplay bloqueado */ });
  history.replaceState(null, "", "?lang="+lang);
}

document.querySelectorAll("button.lang").forEach(b=>{
  b.addEventListener("click", ()=> setLang(b.dataset.lang));
});

setLang(startLang);
</script>
</body>
</html>
